---
layout: post
title:  "라즈베리파이 비밀번호 초기화 방법"
date:   2019-06-23 22:06:00 +0900
categories: raspberrypi
---
여러대의 라즈베리파이를 사용하다보면, 설정해둔 패스워드를 까먹기 마련이다. 라즈베리파이로 채점을 진행해야 하는데, 처음부터 설정하기가 너무 번거로워서 기존에 안쓰고 있는 라즈베리파이를 가지고 왔다. 하지만, 라즈비안의 기본 계정인 `pi` 계정의 패스워드가 `rasppbery`가 아니라서 고민을 1분 정도 했다. 결론은 `pi`계정의 패스워드를 초기화 하는 방법을 고안하였다. 

리눅스는 `/etc/shadow` 파일에서 계정별 패스워드를 관리하고 있다. 이를 활용하기로 하였다. 라즈비안이 설치되어 있는 microSD 카드를 리더기에 꽂아서 리눅스가 설치되어 있는 시스템에 USB를 꽂으면 boot 파티션과 rootfs 파티션이 자동으로 마운트 된다. rootfs 파티션은 이름 그대로 `/` 파티션으로 이해하면 된다. 해당 볼륨에는 리눅스라면 존재하는 당연한 디렉토리가 보이는데, `/etc/shadow` 파일을 열면 다음과 같이 보일 것이다. 

```
root:*:17499:0:99999:7:::
daemon:*:17499:0:99999:7:::
bin:*:17499:0:99999:7:::
sys:*:17499:0:99999:7:::
sync:*:17499:0:99999:7:::
games:*:17499:0:99999:7:::
man:*:17499:0:99999:7:::
lp:*:17499:0:99999:7:::
mail:*:17499:0:99999:7:::
news:*:17499:0:99999:7:::
uucp:*:17499:0:99999:7:::
proxy:*:17499:0:99999:7:::
www-data:*:17499:0:99999:7:::
backup:*:17499:0:99999:7:::
list:*:17499:0:99999:7:::
irc:*:17499:0:99999:7:::
gnats:*:17499:0:99999:7:::
nobody:*:17499:0:99999:7:::
systemd-timesync:*:17499:0:99999:7:::
systemd-network:*:17499:0:99999:7:::
systemd-resolve:*:17499:0:99999:7:::
systemd-bus-proxy:*:17499:0:99999:7:::
_apt:*:17499:0:99999:7:::
pi:$6$aL9tKoN4$CYpHIPALpfAbOn.vSCR6ZqeK41LZ4eYCTItmiX6gJUUjYFV7entBJdEiX7f5geL.FNZzJ1EArLeneCyaN.ahx/:17499:0:99999:7:::
messagebus:*:17499:0:99999:7:::
statd:*:17499:0:99999:7:::
sshd:*:17499:0:99999:7:::
avahi:*:17499:0:99999:7:::
lightdm:*:17499:0:99999:7:::
epmd:*:17499:0:99999:7:::
```

중요한건 것은 `pi:$6$aL9tKoN4$CYpHIPALpfAbOn.vSCR6ZqeK41LZ4eYCTItmiX6gJUUjYFV7entBJdEiX7f5geL.FNZzJ1EArLeneCyaN.ahx/:17499:0:99999:7:::` 부분이다. pi 계정에 대한 패스워드는 부분은 :(colon)으로 구분되어 있는 필드에서 두 번째에 해시되어 있는 부분이다. 현재 보여주고 있는 해시된 원본 값은 `raspberry` 이다. 

만약, 본인의 pi 계정의 패스워드를 rapberry 로 변경하고 싶다면, 위에서 보이는 해시로 바꿔주면 된다. 